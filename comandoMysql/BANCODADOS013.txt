CREATE DATABASE BDVENDAS;

CREATE USER 'usuariocurso'@'%' IDENTIFIED BY '123';
GRANT ALL ON BDVENDAS.* TO 'usuariocurso'@'%' WITH GRANT OPTION;
FLUSH PRIVILEGES;

USE BDVENDAS;

CREATE TABLE TB_CLIENTE (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(100),
    RG VARCHAR(30),
    CPF VARCHAR(11), 
    EMAIL VARCHAR(200),
    TELEFONE VARCHAR(30),
    CELULAR VARCHAR(30),
    CEP VARCHAR(100),
    ENDERECO VARCHAR(255),
    NUMERO INT,
    COMPLEMENTO VARCHAR(200),
    BAIRRO VARCHAR(100),
    CIDADE VARCHAR(100),
    ESTADO VARCHAR(2)
);

CREATE TABLE TB_FORNECEDOR (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(100),
    CNPJ VARCHAR(14),  
    EMAIL VARCHAR(200),
    TELEFONE VARCHAR(30),
    CELULAR VARCHAR(30),
    CEP VARCHAR(100),
    ENDERECO VARCHAR(255),
    NUMERO INT,
    COMPLEMENTO VARCHAR(200),
    BAIRRO VARCHAR(100),
    CIDADE VARCHAR(100),
    ESTADO VARCHAR(2)
);

CREATE TABLE TB_FUNCIONARIO (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(100),
    RG VARCHAR(30),
    CPF VARCHAR(11),  
    EMAIL VARCHAR(200),
    SENHA VARCHAR(50), 
    CARGO VARCHAR(100),
    NIVEL_ACESSO VARCHAR(50),
    TELEFONE VARCHAR(30),
    CELULAR VARCHAR(30),
    CEP VARCHAR(100),
    ENDERECO VARCHAR(255),
    NUMERO INT,
    COMPLEMENTO VARCHAR(200),
    BAIRRO VARCHAR(100),
    CIDADE VARCHAR(100),
    ESTADO VARCHAR(2)
);

CREATE TABLE TB_PRODUTOS (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    DESCRICAO VARCHAR(100),
    PRECO DECIMAL(10,2),
    QTD_ESTOQUE INT,
    FOR_ID INT,
    FOREIGN KEY (FOR_ID) REFERENCES TB_FORNECEDOR(ID)
);

CREATE TABLE TB_VENDAS (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    CLIENTE_ID INT,
    DATA_VENDAS DATETIME,
    TOTAL_VENDAS DECIMAL(10,2),
    OBSERVACAO TEXT,
    FOREIGN KEY (CLIENTE_ID) REFERENCES TB_CLIENTE(ID)
);

CREATE TABLE TB_ITEMVENDAS (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    VENDA_ID INT,
    PRODUTO_ID INT,
    QTD INT,
    SUBTOTAL DECIMAL(10,2),
    FOREIGN KEY (VENDA_ID) REFERENCES TB_VENDAS(ID),
    FOREIGN KEY (PRODUTO_ID) REFERENCES TB_PRODUTOS(ID)
);